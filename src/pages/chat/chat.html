<!--
  Generated template for the ChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
  <ion-navbar>
    <ion-title>{{ accountService.authorizedId }}</ion-title>
    <ion-buttons end>
      <button ion-button (click)="logout()">
        logout
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content #chatContent>
  <ion-infinite-scroll position="top" (ionInfinite)="onScrollTop($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>

  <ion-list [virtualScroll]="comments" [virtualTrackBy]="trackById" approxItemHeight="50px" inset>
    <ion-item *virtualItem="let comment">
      <chat-comment [comment]="comment"
                    [isEditing]="(service.editingId$ | async) === comment.id"
                    (onUpdate)="update($event)"
                    (onRemove)="remove($event)">
      </chat-comment>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <form (ngSubmit)="create()">
      <ion-item>
        <ion-input type="text" [(ngModel)]="newComment.body" name="body" placeholder="text input">
        </ion-input>
        <button ion-button item-right type="submit">submit</button>
      </ion-item>
    </form>
  </ion-toolbar>
</ion-footer>
